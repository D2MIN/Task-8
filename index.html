<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 8</title>
    <link rel="stylesheet" href="style/style.css">
    <script src="skript/script.js" defer></script>
</head>

<body>
    <div class="content">
        <div class="button_block">
            <button type="button" class="button_form" id="btn_form">Форма</button>
        </div>
        <div class="bigtext">
            <h1 class="color">Big text</h1>
            <div class="text">
                Lorem ipsum dolor si t amet <a class="color">consectetur</a> adipi sicing elit. Autem vero vel ac cusamus modi odio, ipsa itaque dolores totam maxime ei us nesciunt in molestias. Incidunt ipsa tenetur voluptate illo dolorem molestias.
            </div>
            <br>
            <div class="text">
                Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laborum voluptatum officia labore illum? Libero iure sint mollitia quos qui recusandae nobis, praesentium commodi sapiente at atque ullam vel quam rem, deserunt quia temporibus quibusdam! Quos
                dolorem eius velit. Odit deserunt facilis <a class="color">accusantium</a> accusantium quisquam omnis deleniti, aspernatur ullam cupiditate, iure, eligendi veritatis voluptas in? <a class="color">Veniam culpa provident nihil itaque</a> nobis aut nostrum, ex ad velit, iste iusto repellendus
                tempora ipsa quasi? Corporis eius harum asperiores odit nesciunt. Odit sapiente aliquid ipsum voluptatem, blanditiis impedit nam illo expedita earum veritatis facere at soluta cupiditate. Provident reprehenderit facilis distinctio soluta
                delectus ullam incidunt.
            </div>
            <br>
            <div class="text">
                Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laborum voluptatum officia labore illum? Libero iure sint mollitia quos qui recusandae nobis, praesentium commodi sapiente at atque ullam vel quam rem, deserunt quia temporibus quibusdam! Quos
                dolorem eius velit. Odit deserunt facilis <a class="color">accusantium</a> quisquam omnis deleniti, aspernatur ullam cupiditate, iure, eligendi veritatis voluptas in? Veniam culpa provident nihil itaque nobis aut nostrum, ex ad velit, iste iusto repellendus
                tempora ipsa quasi? Corporis eius harum asperiores odit nesciunt. Odit sapiente aliquid ipsum voluptatem, blanditiis impedit nam illo expedita earum veritatis facere at soluta cupiditate. Provident reprehenderit facilis distinctio soluta
                delectus ullam incidunt.
            </div>
        </div>
    </div>

    <div class="popup_block" id="popup">
        <div class="popup">
            <div class="close" id="popup_close">
                <p>X</p>
            </div>
            <div class="popup_content" id="popup_content">
                <form
                    id="myForm"
                    class="ajaxForm" 
                    action="https://formcarry.com/s/tIRxDpkELM"
                    method="POST"
                    enctype="multipart/form-data"
                >
                    <h1>Форма обратной связи:</h1>
                    <input class="inp" name="Email" type="text" placeholder="Ваше имя" required>
                    <input class="inp" name="Tell" type="email" placeholder="test_mail@gmail.com" required>
                    <input class="inp" name="Conpuny" type="tel" placeholder="+7 123 456 78 90" required> 
                    <input class="inp" name="Massage" type="text" placeholder="Google" required> 
                    <textarea name="describe" cols="30" rows="7" id="textArea"></textarea>
                    <p>
                        <input type="checkbox" class="check" required>
                        Я согласен на обработку моих данных
                    </p>
                    <input type="submit" value="Отправить" class="popup_inp" id="popup_inp" required>
                    <br>
                </form>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
                <script>
                    $(function(){
                        const form = document.getElementById('myForm');
                        const inputs = form.querySelectorAll('input');
                        let textArea = document.getElementById('textArea');

                        $(".ajaxForm").submit(function(e){
                        e.preventDefault();
                        var href = $(this).attr("action");
                        $.ajax({
                            type: "POST",
                            dataType: "json",
                            url: href,
                            data: $(this).serialize(),
                            success: function(response){
                            if(response.status == "success"){
                                alert("We received your submission, thank you!");
                                inputs.forEach((element)=>{
                                    element.value = "";
                                })
                                inputs[5].value = "Отправить";
                                inputs[4].checked = null;
                                textArea.value = "";
                            }else{
                                alert("An error occured: " + response.message);
                                inputs.forEach((element)=>{
                                    element.value = "";
                                })
                                inputs[5].value = "Отправить";
                                inputs[4].checked = null;
                                textArea.value = "";
                            }
                            }
                        });
                        });
                    });
                </script>
            </div>
        </div>
    </div>
</body>

</html>